package com.example.hp_pavilion.realapppresensi

import android.content.Context
import android.support.v7.app.AppCompatActivity
import android.os.Bundle
import android.content.Intent
import android.widget.EditText
import android.widget.ImageButton
import android.widget.TextView
import com.example.hp_pavilion.realapppresensi.models.data
import com.example.hp_pavilion.realapppresensi.storage.SharedPrefManager

class MenuActivity : AppCompatActivity() {

    private lateinit var imageButton: ImageButton
    private lateinit var imageButton_tentang : ImageButton
    private lateinit var imageButton_laporan : ImageButton
    private lateinit var imageButton_jadwal  : ImageButton
    private lateinit var text_id : TextView
    private lateinit var text_nama : TextView
    private lateinit var text_jabatan : TextView

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_menu)
        imageButton_jadwal = findViewById(R.id.jadwal)
        imageButton_laporan = findViewById(R.id.laporan)
        imageButton_tentang = findViewById(R.id.tentang)
        imageButton = findViewById(R.id.peta)
        text_id = findViewById(R.id.userr_id)
        text_nama = findViewById(R.id.txt_nama)
        text_jabatan = findViewById(R.id.txt_jabatan)



//
      val sharedPrefManager = SharedPrefManager(this)
       val id = sharedPrefManager.data
        text_id.text = id.toString()

        val nama = sharedPrefManager.nama
        text_nama.text = nama

        val jabatan = sharedPrefManager.jabatan
        text_jabatan.text = jabatan




        imageButton.setOnClickListener{
            startActivity(Intent(this, MapsActivity::class.java))
        }

        imageButton_tentang.setOnClickListener{
            startActivity(Intent(this, TentangActivity::class.java))
        }

        imageButton_laporan.setOnClickListener{
            startActivity(Intent(this, LaporanActivity::class.java))
        }

        imageButton_jadwal.setOnClickListener{
            startActivity(Intent(this, JadwalActivity::class.java))
        }
    }

 override fun onStart() {
       super.onStart()

       if (!SharedPrefManager.getInstance(this).isLoggedIn) {
           val intent = Intent(applicationContext, LoginActivity::class.java)
           intent.flags = Intent.FLAG_ACTIVITY_NEW_TASK or Intent.FLAG_ACTIVITY_CLEAR_TASK
           startActivity(intent)
        }
    }
}


